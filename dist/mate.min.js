/*!
  * Mate - an animation library 
  * v0.0.1
  * https://github.com/jgallen23/cookie-monster
  * copyright JGA 2011
  * MIT License
  */
!function(a,b){typeof module!="undefined"&&module.exports?module.exports=b():typeof define=="function"&&typeof define.amd=="object"?define(b):this[a]=b()}("mate",function(){var a={"-webkit-":"webkitTransitionEnd","-moz-":"transitionend"},b=function(a){return typeof a=="string"?document.getElementById(a):a},c=function(){var a=navigator.userAgent;return a.indexOf("WebKit")!=-1?"-webkit-":a.indexOf("Gecko")!=-1?"-moz-":""},d=c(),e=function(a){this.el=a,this.animations=[],this._delay=0,this._offset=0,this._duration=500,this._ease="ease",this._then=null,this._repeat=!1,this.queue=[],this.root=null};e.prototype.getRoot=function(){return this.root||this},e.prototype.getParent=function(){return this.parent||this},e.prototype.at=function(a){var b=this.getRoot(),c=new e;return c.root=b,c._offset=a,b.animations.push(c),c},e.prototype.duration=function(a){return this._duration=a,this},e.prototype.ease=function(a){return this._ease=a,this},e.prototype.delay=function(a){return this._delay=a,this},e.prototype.repeat=function(){return this._repeat=!0,this},e.prototype.addVendorPrefix=function(a){return a=="transform"?d+a:a},e.prototype.anim=function(a,b){return this.queue.push({prop:this.addVendorPrefix(a),val:b}),this},e.prototype.scale=function(a){return this.queue.push({prop:this.addVendorPrefix("transform"),val:"scale("+a+")"}),this},e.prototype.rotate=function(a){return this.queue.push({prop:this.addVendorPrefix("transform"),val:"rotate("+a+")"}),this},e.prototype.opacity=function(a){return this.queue.push({prop:"opacity",val:a}),this},e.prototype.translate=function(a,b){return b||(b=0),this.queue.push({prop:this.addVendorPrefix("transform"),val:"translate("+a+","+b+")"}),this},e.prototype.repeatAnimation=function(a){var b=this.parent||this;b._repeat&&f(b)},e.prototype.animate=function(b){console.log(this.el,this.getParent()._offset);if(!this.el)return;var c=this;setTimeout(function(){c.el.style.setProperty(d+"transition","all "+c._duration/1e3+"s "+c._ease,"");var e=function(){c.getParent()._offset=0,c.el.removeEventListener(a[d],e),c._then?c._then.animate():c.repeatAnimation(b),b&&b()};c.el.addEventListener(a[d],e);for(var f=0,g=c.queue.length;f<g;f++){var h=c.queue[f];c.el.style.setProperty(h.prop,h.val,"")}},this._delay+this.getParent()._offset)},e.prototype.then=function(){var a=new e(this.el);return a.root=this.root||this,a.parent=this.parent||this,this._then=a,a},e.prototype.use=function(a){var c=this.root||this,d=new e(b(a));return d.root=c,console.log(this._offset),d._offset=this._offset,c.animations.push(d),d},e.prototype.run=function(){var a=this.root||this;return f(a)};var f=function(a){console.log(a),a.animate();for(var b=0,c=a.animations.length;b<c;b++)f(a.animations[b]);return a},g=function(a){return new e(b(a))};return g})